var expression=[],buffLocalStorage=[];function addElem(e,t){t?(expression[expression.length]=e,$(".input__field").text("")):expression.length%2==0?expression[expression.length]=e:"√"==e?expression[expression.length-1]=e:expression[expression.length-1]+=e}function arifmetic(){let e=check(expression[0]);if(1==expression.length)e=e.toString(),e.includes(".")&&(e=Number(e).toFixed(6)),expression[0]=e.toString();else{let t,a;for(let l=0;l<expression.length;l++)if(l%2!=0){switch(t=e,a=check(expression[l+1]),expression[l]){case"^":e=Math.pow(Number(e),a);break;case"%":e=Number(e)/100*a;break;case"/":e=Number(e)/Number(a);break;case"*":e=Number(e)*Number(a);break;case"-":e=Number(e)-Number(a);break;case"+":e=Number(e)+Number(a)}e=e.toString(),e.includes(".")&&(e=Number(e).toFixed(6)),concatenation(t,expression[l],a,e)}(expression=[])[0]=e}$(".input__field").text(e)}function concatenation(e,t,a,l){let o=e+" "+t+" "+a+" = "+l;$(".list__body").append('<li class="list__link">'+o+"</li>"),pushInLocalStorage(o),0!=$(".list__body").find("li").length&&$(".calc__list").css("display","block")}function check(e){if(e.toString(),e.includes("√")){let t=e.slice(1),a=Math.sqrt(t);return a=a.toString(),a.includes(".")&&(a=Number(a).toFixed(6)),$(".list__body").append('<li class="list__link">√('+t+") = "+a+"</li>"),pushInLocalStorage("√("+t+") = "+a),a}return e}function pushInLocalStorage(e){100==buffLocalStorage.length?(balancingLocalStorage(),buffLocalStorage[buffLocalStorage.length-1]=e,localStorage.setItem("list",buffLocalStorage)):(buffLocalStorage[buffLocalStorage.length]=e,localStorage.setItem("list",buffLocalStorage))}function balancingLocalStorage(){for(let e=0;e<buffLocalStorage.length;e++)e!=buffLocalStorage.length-1&&(buffLocalStorage[e]=buffLocalStorage[e+1])}function showLocalStorage(){if(localStorage.getItem("list")){buffLocalStorage=localStorage.getItem("list").split(",");for(let e=0;e<buffLocalStorage.length;e++)$(".list__body").append('<li class="list__link">'+buffLocalStorage[e]+"</li>")}0==$(".list__body").find("li").length?$(".calc__list").css("display","none"):$(".calc__list").css("display","block")}$(document).ready((function(){showLocalStorage(),$(".column__item").click((function(){let e=$(this).text();if($(".input__field").hasClass("active"))switch(e){case"=":arifmetic();break;case"^":case"%":case"/":case"*":case"-":case"+":addElem(e,1);break;case"√":addElem(e,0);break;case"C":$(".input__field").text(""),expression=[];break;default:"on"!=e&&"off"!=e&&($(".input__field").text($(".input__field").text()+e),addElem(e,0))}switch(e){case"on":$(".input__field").addClass("active");break;case"off":$(".input__field").removeClass("active"),$(".input__field").text("")}})),$(".calc__arrow").click((function(){$(".calc__list").toggleClass("active"),$(".calc__list").hasClass("active")?($(".calc__arrow  img").css("transform","rotate(0deg)"),$(".calc__arrow").css("background-color","rgb(194, 131, 36)")):($(".calc__arrow  img").css("transform","rotate(180deg)"),$(".calc__arrow").css("background-color","rgba(194, 131, 36, 0.836)"))}))}));